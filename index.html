<script>
  // Send state clicks to Wix Velo
  function sendToWix(payload) {
    // Works inside Wix HTML Component iframe
    if (window.parent) {
      window.parent.postMessage(payload, "*");
    }
  }

  // SimpleMaps callback: state clicked
  // SimpleMaps calls this function if it exists
  window.simplemaps_usmap_state_click = function (id) {
    try {
      var st = (window.simplemaps_usmap_mapdata &&
                window.simplemaps_usmap_mapdata.state_specific &&
                window.simplemaps_usmap_mapdata.state_specific[id]) || {};

      sendToWix({
        type: "henStateClicked",
        id: id,
        name: st.name || id,
        color: st.color || "",
        description: st.description || ""
      });
    } catch (e) {
      sendToWix({ type: "henStateClicked", id: id, name: id });
    }
  };
</script>
